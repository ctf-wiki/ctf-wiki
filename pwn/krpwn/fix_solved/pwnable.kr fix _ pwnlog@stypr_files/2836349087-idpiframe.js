var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ba=function(){ba=function(){};k.Symbol||(k.Symbol=ca)},ca=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}(),ea=function(){ba();var a=k.Symbol.iterator;a||(a=k.Symbol.iterator=k.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&
aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return da(this)}});ea=function(){}},da=function(a){var b=0;return fa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},fa=function(a){ea();a={next:a};a[k.Symbol.iterator]=function(){return this};return a},ha=function(a){ea();var b=a[Symbol.iterator];return b?b.call(a):da(a)},ia=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);
if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ja=function(a,b){function c(){}c.prototype=b.prototype;
a.$b=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Yb=function(a,c,g){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var l=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,l);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};ja(l,Error);l.prototype.name="CustomError";var ka=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};var la=function(a,b){b.unshift(a);l.call(this,ka.apply(null,b));b.shift()};ja(la,l);la.prototype.name="AssertionError";var ma=function(a,b,c){if(!a){var d="Assertion failed";if(b){d+=": "+b;var e=Array.prototype.slice.call(arguments,2)}throw new la(""+d,e||[]);}};var na=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}return b};var oa=null,pa=function(a){var b=ia(a);ma("array"==b||"object"==b&&"number"==typeof a.length,"encodeByteArray takes an array as a parameter");if(!oa)for(oa={},b=0;65>b;b++)oa[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b);b=oa;for(var c=[],d=0;d<a.length;d+=3){var e=a[d],g=d+1<a.length,f=g?a[d+1]:0,n=d+2<a.length,m=n?a[d+2]:0,y=e>>2;e=(e&3)<<4|f>>4;f=(f&15)<<2|m>>6;m&=63;n||(m=64,g||(f=64));c.push(b[y],b[e],b[f],b[m])}return c.join("")};var qa=function(){this.u=-1};var p=function(a,b,c){this.u=-1;this.C=a;this.u=c||a.u||16;this.Qa=Array(this.u);this.va=Array(this.u);a=b;a.length>this.u&&(this.C.update(a),a=this.C.digest(),this.C.reset());for(c=0;c<this.u;c++)b=c<a.length?a[c]:0,this.Qa[c]=b^92,this.va[c]=b^54;this.C.update(this.va)};ja(p,qa);p.prototype.reset=function(){this.C.reset();this.C.update(this.va)};p.prototype.update=function(a,b){this.C.update(a,b)};
p.prototype.digest=function(){var a=this.C.digest();this.C.reset();this.C.update(this.Qa);this.C.update(a);return this.C.digest()};var ra=function(a,b){a.reset();a.update(b);return a.digest()};var q=function(){this.u=64;this.l=Array(4);this.hb=Array(this.u);this.ia=this.X=0;this.reset()};ja(q,qa);q.prototype.reset=function(){this.l[0]=1732584193;this.l[1]=4023233417;this.l[2]=2562383102;this.l[3]=271733878;this.ia=this.X=0};
var sa=function(a,b,c){c||(c=0);var d=Array(16);if("string"==typeof b)for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.l[0];c=a.l[1];e=a.l[2];var g=a.l[3];var f=b+(g^c&(e^g))+d[0]+3614090360&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[1]+3905402710&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[2]+606105819&4294967295;e=g+(f<<17&4294967295|f>>>
15);f=c+(b^e&(g^b))+d[3]+3250441966&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[4]+4118548399&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[5]+1200080426&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[6]+2821735955&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[7]+4249261313&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[8]+1770035416&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[9]+2336552879&4294967295;g=b+(f<<12&4294967295|
f>>>20);f=e+(c^g&(b^c))+d[10]+4294925233&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[11]+2304563134&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(g^c&(e^g))+d[12]+1804603682&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(e^b&(c^e))+d[13]+4254626195&4294967295;g=b+(f<<12&4294967295|f>>>20);f=e+(c^g&(b^c))+d[14]+2792965006&4294967295;e=g+(f<<17&4294967295|f>>>15);f=c+(b^e&(g^b))+d[15]+1236535329&4294967295;c=e+(f<<22&4294967295|f>>>10);f=b+(e^g&(c^e))+d[1]+4129170786&4294967295;b=c+(f<<
5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[6]+3225465664&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[11]+643717713&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[0]+3921069994&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[5]+3593408605&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[10]+38016083&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[15]+3634488961&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[4]+3889429448&4294967295;c=
e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[9]+568446438&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[14]+3275163606&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[3]+4107603335&4294967295;e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[8]+1163531501&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(e^g&(c^e))+d[13]+2850285829&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^e&(b^c))+d[2]+4243563512&4294967295;g=b+(f<<9&4294967295|f>>>23);f=e+(b^c&(g^b))+d[7]+1735328473&4294967295;
e=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(e^g))+d[12]+2368359562&4294967295;c=e+(f<<20&4294967295|f>>>12);f=b+(c^e^g)+d[5]+4294588738&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[8]+2272392833&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[11]+1839030562&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[14]+4259657740&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[1]+2763975236&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[4]+1272893353&4294967295;g=b+(f<<11&4294967295|
f>>>21);f=e+(g^b^c)+d[7]+4139469664&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[10]+3200236656&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[13]+681279174&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[0]+3936430074&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[3]+3572445317&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[6]+76029189&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(c^e^g)+d[9]+3654602809&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^e)+d[12]+
3873151461&4294967295;g=b+(f<<11&4294967295|f>>>21);f=e+(g^b^c)+d[15]+530742520&4294967295;e=g+(f<<16&4294967295|f>>>16);f=c+(e^g^b)+d[2]+3299628645&4294967295;c=e+(f<<23&4294967295|f>>>9);f=b+(e^(c|~g))+d[0]+4096336452&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[7]+1126891415&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[14]+2878612391&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[5]+4237533241&4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[12]+1700485571&
4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[3]+2399980690&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[10]+4293915773&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[1]+2240044497&4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[8]+1873313359&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[15]+4264355552&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[6]+2734768916&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[13]+1309151649&
4294967295;c=e+(f<<21&4294967295|f>>>11);f=b+(e^(c|~g))+d[4]+4149444226&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~e))+d[11]+3174756917&4294967295;g=b+(f<<10&4294967295|f>>>22);f=e+(b^(g|~c))+d[2]+718787259&4294967295;e=g+(f<<15&4294967295|f>>>17);f=c+(g^(e|~b))+d[9]+3951481745&4294967295;a.l[0]=a.l[0]+b&4294967295;a.l[1]=a.l[1]+(e+(f<<21&4294967295|f>>>11))&4294967295;a.l[2]=a.l[2]+e&4294967295;a.l[3]=a.l[3]+g&4294967295};
q.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.u,d=this.hb,e=this.X,g=0;g<b;){if(0==e)for(;g<=c;)sa(this,a,g),g+=this.u;if("string"==typeof a)for(;g<b;){if(d[e++]=a.charCodeAt(g++),e==this.u){sa(this,d);e=0;break}}else for(;g<b;)if(d[e++]=a[g++],e==this.u){sa(this,d);e=0;break}}this.X=e;this.ia+=b};
q.prototype.digest=function(){var a=Array((56>this.X?this.u:2*this.u)-this.X);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;var c=8*this.ia;for(b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var d=0;32>d;d+=8)a[c++]=this.l[b]>>>d&255;return a};var r={Xb:{}},t,ta=!1,u=function(a){try{ta&&window.console&&window.console.log&&window.console.log(a)}catch(b){}},v=function(a,b){if(!a)return-1;if(a.indexOf)return a.indexOf(b,void 0);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},w=function(a,b){function c(){}if(!a)throw"Child class cannot be empty.";if(!b)throw"Parent class cannot be empty.";c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},ua=function(a){return"[object Function]"===Object.prototype.toString.call(a)},
va=function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(null===d||void 0===d)d="";b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},wa=function(a){a=(new RegExp("[&#]"+a+"=([^&]*)")).exec(window.location.hash);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},xa=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else throw"Add event handler for "+b+" failed.";},ya=function(a,b){a=
(a||"").split(" ");b=(b||"").split(" ");for(var c=0;c<b.length;c++)if(b[c]&&0>v(a,b[c]))return!1;return!0},za=function(){if("undefined"!=typeof t)return t;var a=window.localStorage?window.localStorage:void 0;if(!a)return t=!1;try{a.setItem("test","test"),a.removeItem("test"),t=!0}catch(b){t=!1}return t},Aa=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&8==parseInt(a.split("msie")[1],10)},x=function(){return Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject},
Ba=function(){var a=navigator.userAgent;return!!a&&/Edge\/\d+/.test(a)},Ca=function(){var a=navigator.userAgent,b;if(b=!!a&&-1!=a.indexOf("CriOS"))b=-1,(a=a.match(/CriOS\/(\d+)/))&&a[1]&&(b=parseInt(a[1],10)||-1),b=48>b;return b},Da=function(){var a=navigator.userAgent.toLowerCase();return-1<a.indexOf("safari/")&&0>a.indexOf("chrome/")&&0>a.indexOf("crios/")&&0>a.indexOf("android")},z=function(a){this.Aa=a||[];this.D={}};
z.prototype.addEventListener=function(a,b){if(!(0<=v(this.Aa,a)))throw"Unrecognized event type: "+a;if(!ua(b))throw"The listener for event '"+a+"' is not a function.";this.D[a]||(this.D[a]=[]);0>v(this.D[a],b)&&this.D[a].push(b)};z.prototype.removeEventListener=function(a,b){if(!(0<=v(this.Aa,a)))throw"Unrecognized event type: "+a;ua(b)&&this.D[a]&&this.D[a].length&&(b=v(this.D[a],b),0<=b&&this.D[a].splice(b,1))};
z.prototype.dispatchEvent=function(a){var b=a.type;if(!(b&&0<=v(this.Aa,b)))throw"Failed to dispatch unrecognized event type: "+b;if(this.D[b]&&this.D[b].length)for(var c=0,d=this.D[b].length;c<d;c++)this.D[b][c](a)};var A=A||{};A.K=function(a){a=encodeURIComponent(a);var b=A.La();if(b&&(a=b.match("(^|;) ?"+a+"=([^;]*)(;|$)"))&&2<a.length&&(a=a[2]))return decodeURIComponent(a)};A.tb=function(a){var b;(a=A.K(a))&&(b=String(Ea(a)));return b};A.La=function(){return document.cookie};
A.Rb=function(a){document.cookie=a};r=r||{};
r.Ab=function(a,b){if(!0===r.ra)a();else{var c=2;var d=function(){c--;0==c&&(r.ra=!0,a())};var e=function(a){b(a)};switch(Fa()){case "sessionStorage":r.ha=new Ga;r.ha.J(d,e);break;case "inMemoryStorage":r.ha=new Ha;r.ha.J(d,e);break;default:d=Error("Unsupported storage type: "+Fa());b(d);return}switch(Ia()){case "localStorage":r.R=new Ja;r.R.J(d,e);break;case "indexedDb":r.R=new Ka;r.R.J(d,e);break;case "cookieStorage":r.R=new La;r.R.J(d,e);break;default:d=Error("Unsupported storage type: "+Ia()),
b(d)}}};r.Na=function(){if(!r.ra)throw Error("Storages are not initialized yet!");return r.R};r.yb=function(){if(!r.ra)throw Error("Storages are not initialized yet!");return r.ha};var Ja=function(){};h=Ja.prototype;h.J=function(a,b){za()?(this.Y=window.localStorage,a()):b&&b(Error("localStorage is not available in the current environment."))};h.getItem=function(a,b){b(this.Y.getItem(a))};h.setItem=function(a,b,c){void 0===b||null===b?this.Y.removeItem(a):this.Y.setItem(a,b);c&&c()};
h.removeItem=function(a,b){this.Y.removeItem(a);b&&b()};h.clear=function(a){this.Y.clear();a&&a()};var Ka=function(){};h=Ka.prototype;h.J=function(a,b){var c=this,d=window.indexedDB.open("oauth");d.onsuccess=function(b){c.ea=b.target.result;a()};d.onupgradeneeded=function(a){a.target.result.createObjectStore("oauth")};d.onerror=function(a){a=a.target.errorCode;b&&b(Error("IndexedDb initialization failed: "+a))}};
h.getItem=function(a,b){var c=this.ea.transaction("oauth","readwrite").objectStore("oauth").get(a);c.onsuccess=function(){b(c.result)}};h.setItem=function(a,b,c){var d=this.ea.transaction("oauth","readwrite").objectStore("oauth");if(void 0===b||null===b)d["delete"](a);else d.put(b,a);d.transaction.oncomplete=function(){c&&c()}};h.removeItem=function(a,b){var c=this.ea.transaction("oauth","readwrite").objectStore("oauth");c["delete"](a);c.transaction.oncomplete=function(){b&&b()}};
h.clear=function(a){var b=this.ea.transaction("oauth","readwrite").objectStore("oauth");b.clear();b.transaction.oncomplete=function(){a&&a()}};var Ha=function(){};h=Ha.prototype;h.J=function(a){this.ga={};a()};h.getItem=function(a,b){b(this.ga[a]||null)};h.setItem=function(a,b,c){this.ga[a]=b;c&&c()};h.removeItem=function(a,b){delete this.ga[a];b&&b()};h.clear=function(a){this.ga={};a&&a()};var Ga=function(){};h=Ga.prototype;h.J=function(a,b){za()?(this.ba=window.sessionStorage,a()):b&&b(Error("sessionStorage is not available in the current environment."))};
h.getItem=function(a,b){b(this.ba.getItem(a))};h.setItem=function(a,b,c){void 0===b||null===b?this.ba.removeItem(a):this.ba.setItem(a,b);c&&c()};h.removeItem=function(a,b){this.ba.removeItem(a);b&&b()};h.clear=function(a){this.ba.clear();a&&a()};var La=function(){this.Eb=B.Ya};h=La.prototype;h.J=function(a,b){navigator.cookieEnabled?a():b&&b(Error("Cookies are not enabled in current environment."))};h.getItem=function(a,b){for(var c=null,d=Ma(a),e=0;e<d.length;e++)if(d[e].key==a){c=d[e].value;break}b(c)};
h.setItem=function(a,b,c){var d=B.oa(a.split(B.i)[0]);if(d){var e=Na(d);b={key:a,value:b};for(var g=0;g<e.length;g++)if(e[g].key==a){e.splice(g,1);break}e.push(b);Oa(this,d,e)}c&&c()};h.removeItem=function(a,b){for(var c=Ma(a),d=0;d<c.length;d++)if(c[d].key==a){c.splice(d,1);break}(a=B.oa(a.split(B.i)[0]))&&Oa(this,a,c);b&&b()};h.clear=function(a){r.ib();a&&a()};
var Ma=function(a){return(a=B.oa(a.split(B.i)[0]))?Na(a):[]},Na=function(a){a=A.K(a);return r.kb(a||null)},Oa=function(a,b,c){var d=r.mb(c);d.length>a.Eb?(c.splice(0,1),0<c.length?Oa(a,b,c):u("Failed to write Cookie based cache due to the big size.")):r.Va(b,d)};r.jb=function(a){try{return atob(a)}catch(b){return a}};r.lb=function(a){try{return btoa(a)}catch(b){return a}};
r.kb=function(a){if(!a)return[];a=r.jb(a);try{return JSON.parse(a).items||[]}catch(b){return u("Error while parsing items from cookie:"+b.message),[]}};r.mb=function(a){return r.lb(JSON.stringify({items:a}))};r.Va=function(a,b){var c=window.location.hostname,d=window.location.pathname;a=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; domain="+c+";";-1!=navigator.userAgent.toLowerCase().indexOf("msie")||x()||(a+=" path="+d+";");"https:"==window.location.protocol&&(a+=" secure;");A.Rb(a)};
r.ib=function(){var a=B.ka,b=A.La();if(b){b=b.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var c=0;c<b.length;c++){var d=decodeURIComponent(b[c]);0==d.indexOf(a)&&r.Va(d,"")}}};var C=function(a){this.Ra=a;z.call(this,["storageValueChanged"])};w(C,z);var Pa=function(a,b){r.Na().getItem(a.Ra,b)};C.prototype.addListener=function(a){this.addEventListener("storageValueChanged",a)};
C.prototype.start=function(){var a=this;Pa(this,function(b){a.Ib=b;a.Sa=0;a.sa=window.setInterval(Qa(a),200)})};C.prototype.stop=function(){void 0!==this.sa&&(clearInterval(this.sa),this.sa=void 0)};
var Qa=function(a){return function(){a.Sa++;Pa(a,function(b){b!=a.Ib?(a.dispatchEvent({type:"storageValueChanged",key:a.Ra,newValue:b}),a.stop()):1500<=a.Sa&&a.stop()})}},Ea=function(a){var b=0,c;if(a){var d=0;for(c=a.length;d<c;d++){var e=a.charCodeAt(d);b=(b<<5)-b+e;b|=0}}return b},D=function(a){return!!a&&0<=a.indexOf(B.i)},Ra=function(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;a=a.extraQueryParams;b=b.extraQueryParams;if(!a&&!b)return!0;if(!a||!b||Object.keys&&Object.keys(a).length!=Object.keys(b).length)return!1;
for(var c in a)if(a[c]!==b[c])return!1;if(!Object.keys)for(c in b)if(a[c]!==b[c])return!1;return!0},B=B||{};B.ma="SID";B.Ga="SSID";B.Xa=100;B.Ia="/oauth2/sessionstate/action/updateState";B.Ba="/oauth2/sessionstate/action/checkOrigin";B.Fa="/oauth2/permission/action/refresh";B.Ea="/oauth2/permission/action/code";B.ca="/oauth2/permission/action/listSessions";B.eb="/o/oauth2/revoke";B.ab="response_type login_hint client_id origin scope ss_domain authuser hd include_granted_scopes".split(" ");B.$a="login_hint client_id origin scope ss_domain authuser hd include_granted_scopes".split(" ");
B.bb=["client_id","origin","scope","ss_domain","authuser"];B.i="::";B.la="_ss_";B.Da="_tr_";B.W="oauth2_ss";B.Ca="oauth2_cs";B.Ha="oauth2_tr";B.Za="oauth2_is";B.V="oauth2_ar";B.ka="oauth2c_";B.Ya=1500;B.Wb=function(){var a={la:1,Da:2,W:3,Ca:4,Ha:5,V:6},b;for(b in a)if(a=B[b],!a||0<=a.indexOf(B.i))throw"Invalid value for 'oauth2.spi."+b+"'.";};B.Wb();B.cb=512;
B.fb=function(a){var b;(b=void 0===a.hint)||(b=a.hint,b=(""===b?!0:b?"string"==typeof b||"object"==typeof b&&b.constructor===String:!1)&&a.hint.length<=B.cb);return!a.id&&b};B.Oa=function(){return"https:"==window.location.protocol?B.Ga:B.ma};B.oa=function(a){switch(a){case B.V:return B.ka+B.V;case B.W:return B.ka+B.W;default:return null}};
var Ia=function(){return Da()&&!za()||x()&&!window.indexedDB?"cookieStorage":x()||Ba()?"indexedDb":"localStorage"},Fa=function(){return Da()&&!za()?"inMemoryStorage":"sessionStorage"};A=A||{};A.ja="cookieValueChanged";var Sa=function(a,b){this.Ka=a;this.Bb=b;z.call(this,[A.ja])};w(Sa,z);Sa.prototype.K=function(){return A.K(this.Ka)};var E=function(a){return A.tb(a.Ka)};Sa.prototype.addListener=function(a){this.addEventListener(A.ja,a)};
var Va=function(a){Ta(a);a.fa=a.K();a.ya=window.setInterval(Ua(a),a.Bb);u("IDP Session Cookie monitor is started.")},Ta=function(a){void 0!==a.ya&&(window.clearInterval(a.ya),a.ya=void 0,u("IDP Session Cookie monitor is stoped."))},Ua=function(a){return function(){var b=a.K();if(a.fa!=b){var c={type:A.ja,newHash:b&&Ea(b),oldHash:a.fa&&Ea(a.fa)};a.fa=b;a.dispatchEvent(c)}}},Wa=function(a,b){this.a=a;this.Wa=b},Xa=function(a,b,c){var d=B.eb,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==
e.readyState&&200==e.status){var a;e.responseText&&(a=window.JSON.parse(e.responseText));c(a)}};e.open("POST",d,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g="xsrfToken=";a.Wa&&(g+=a.Wa);if(b)for(var f in b)f&&b[f]&&(g+="&"+f+"="+encodeURIComponent(b[f]));u("Call "+d+" with postData: "+g);e.send(g)},F=function(a,b,c,d,e){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){var a;g.responseText&&(a=window.JSON.parse(g.responseText));
d(a)}};if(b=va(b))a+=0>a.indexOf("?")?"?":"&",a+=b;g.open("GET",a,!0);e&&(g.withCredentials=!0);if(c)for(var f in c)if(c.hasOwnProperty(f)){e=c[f];if(null===e||void 0===e)e="";g.setRequestHeader(f,e)}u("Call "+a+" with Get method.");g.send()},Ya=function(a,b,c){F(B.Ba,{origin:a.a,client_id:b},null,c,!1)},Za=function(a,b,c){b&&b.length?F(B.Ia,{login_hint:b.join(" "),origin:a.a},null,c,!1):c({activeHints:{}})},ab=function(a,b,c){b.origin=a.a;b=$a(b,B.ab);F(B.Fa,b,null,c,!1)},bb=function(a,b,c){b.origin=
a.a;b=$a(b,B.$a);F(B.Ea,b,null,c,!1)},cb=function(a,b,c){b.origin=a.a;b=$a(b,B.bb);F(B.ca,b,null,c,!1)},db=function(a,b,c){Xa(a,{token:b},c)},$a=function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];null!=a[e]&&(c[e]=a[e])}return c};r=r||{};var eb=function(){};eb.prototype.B=function(){return!1};var fb={};r.Kb=function(){var a=new G;if(!a)throw"policy cannot be empty.";if(r.Pa("DEFAULT"))throw"Duplicate policyName [DEFAULT].";fb.DEFAULT=a};r.Pa=function(a){for(var b in fb)if(a==b)return!0;return!1};
r.Ma=function(a){return a&&r.Pa(a)?a:"DEFAULT"};r.ub=function(a){return fb[r.Ma(a)]};r.B=function(a,b,c,d){return r.ub(d).B(a,b,c)};r.Zb=function(a,b,c,d){if(!r.B(a,b,c,d))throw"permission_error";};var gb=function(){};w(gb,eb);gb.prototype.B=function(a,b,c){a=c?this.pa(a):this.qa(a);return 0<=v(a,b)};
gb.prototype.qa=function(a){var b=[];if(a&&(b.push(a),"http://"==a.substring(0,7)||"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;a!=c.protocol+"//"+c.hostname&&b.push(c.protocol+"//"+c.hostname);"https:"==c.protocol&&b.push("http://"+c.hostname)}return b};
gb.prototype.pa=function(a){var b=[];if(a){b.push(a);var c=document.createElement("a");c.href=a;if("http:"==c.protocol||"https:"==c.protocol)for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift()}return b};var G=function(){};w(G,eb);G.prototype.B=function(a,b,c){a=c?this.pa(a):this.qa(a);return 0<=v(a,b)};
G.prototype.qa=function(a){var b=[];if(a&&(b.push(a),"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;""!=c.port&&0!=c.port&&443!=c.port||b.push("http://"+c.hostname)}return b};
G.prototype.pa=function(a){var b=[];if(a){var c=document.createElement("a");c.href=a;if("https:"==c.protocol&&(""==c.port||0==c.port||443==c.port)||"http:"==c.protocol&&(""==c.port||0==c.port||80==c.port))for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift();else b.push(a)}return b};r.Kb();var H=function(){};H.prototype.ua=function(){return!0};var I=function(a){return a.ua()?r.yb():r.Na()};
H.prototype.f=function(){throw Error("unimplemented abstract method");};H.prototype.L=function(){throw Error("unimplemented abstract method");};H.prototype.j=function(){throw Error("unimplemented abstract method");};H.prototype.g=function(){throw Error("unimplemented abstract method");};var J=function(){};w(J,H);
J.prototype.j=function(a,b,c){var d=this,e=this.f(a);I(this).getItem(e,function(a){if(a)try{var f=window.JSON.parse(a);if(f.cookieHash!=b){I(d).removeItem(e,function(){c(void 0)});return}var g=f&&f.cachedValue}catch(m){}c(g)})};J.prototype.g=function(a,b,c,d){a=this.f(a);void 0===b||null===b?I(this).removeItem(a,d):(b=JSON.stringify({cookieHash:c,cachedValue:b}),I(this).setItem(a,b,d))};var K=function(){};w(K,H);
K.prototype.j=function(a,b,c){I(this).getItem(this.f(a),function(a){if(a)try{var b=window.JSON.parse(a);var d=b&&b.cachedValue}catch(f){}c(d)})};K.prototype.g=function(a,b,c,d){a=this.f(a);void 0===b||null===b?I(this).removeItem(a,d):(b=JSON.stringify({cachedValue:b}),I(this).setItem(a,b,d))};var L=function(){};w(L,K);L.prototype.ua=function(){return!1};L.prototype.f=function(a){return[B.V,a.origin,a.clientId,a.id].join(B.i)};
L.prototype.L=function(a){var b={};a&&(a=a.split(B.i),4==a.length&&(b.origin=a[1],b.clientId=a[2],b.id=a[3]));return b};var hb=function(){};w(hb,J);hb.prototype.f=function(a){return[B.Ca,a.origin,a.clientId].join(B.i)};hb.prototype.L=function(a){a=a.split(B.i);var b={};3==a.length&&(b.origin=a[1],b.clientId=a[2]);return b};var M=function(){};w(M,J);M.prototype.f=function(a){return[B.Za,a.origin,a.clientId].join(B.i)};
M.prototype.j=function(a,b,c){var d=this;J.prototype.j.call(this,a,b,function(b){b&&b.expires_at?6E4>b.expires_at-(new Date).getTime()?I(d).removeItem(d.f(a),c):ya(b.scope,a.scope)&&ya(a.scope,b.scope)?(b.expires_in=Math.floor((b.expires_at-(new Date).getTime())/1E3),c&&c(b)):I(d).removeItem(d.f(a),c):c&&c(void 0)})};M.prototype.g=function(a,b,c,d){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e=b);J.prototype.g.call(this,a,e,c,d)};var N=function(){};w(N,K);N.prototype.ua=function(){return!1};
N.prototype.f=function(a){return[B.W,a.domain,a.crossSubDomains?"1":"0",r.Ma(a.policy),a.id||B.la].join(B.i)};N.prototype.L=function(a){a=a.split(B.i);var b={};5==a.length&&(b.domain=a[1],b.crossSubDomains="1"==a[2],b.policy=a[3],b.id=a[4]);"DEFAULT"==b.policy&&delete b.policy;b.id==B.la&&delete b.id;return b};var O=function(a){this.Hb=a||B.Ha};w(O,J);O.prototype.f=function(a){return[this.Hb,a.origin,a.clientId,a.id||B.Da].join(B.i)};
O.prototype.j=function(a,b,c){var d=this;J.prototype.j.call(this,a,b,function(b){b&&b.T&&b.T.expires_at?a.loginHint!=b.T.login_hint?I(d).removeItem(d.f(a),c):6E4>b.T.expires_at-(new Date).getTime()?I(d).removeItem(d.f(a),c):ya(b.T.scope,a.scope)?ya(b.responseType,a.responseType)?(b=b.T,b.expires_in=Math.floor((b.expires_at-(new Date).getTime())/1E3),c&&c(b)):I(d).removeItem(d.f(a),c):I(d).removeItem(d.f(a),c):c&&c(void 0)})};
O.prototype.g=function(a,b,c,d){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e={T:b,responseType:a.responseType});J.prototype.g.call(this,a,e,c,d)};var ib=function(a,b){this.a=a;this.wa=b;this.aa={};this.$={}},jb=function(a,b){if(!b)throw"message object cannot be null.";b.rpcToken=a.wa;b=JSON.stringify(b);u("IDP IFrame sends message: "+b);window.parent.postMessage(b,a.a)},P=function(a,b,c){b&&jb(a,{id:b,result:c})};
ib.prototype.Jb=function(a){if(a.source==window.parent&&a.origin==this.a){u("IDP Session State IFrame receive message:"+a.data);try{var b=window.JSON.parse(a.data)}catch(c){return}(b.rpcToken||this.wa)&&b.rpcToken!=this.wa?u("RPC token mismatch."):b&&b.method&&this.aa[b.method]?(a=this.aa[b.method],a.F&&!b.id?u("Bad request."):a.w&&!a.w(b)?(u("Bad request."),jb(this,{id:b.id,error:"bad_request"})):a.v(b)):u("Bad request.")}};
var Q=function(a,b){if(b&&b.type&&a.$[b.type]){var c=a.$[b.type].filter;c&&!c(b)||jb(a,{method:"fireIdpEvent",params:b})}else u("Invalid event type.")},kb=function(a,b){a.aa={};a.$={};if(b){if(b.s)for(var c=0;c<b.s.length;c++){var d=b.s[c];if(!d.method||!d.v)throw"Error in RPC policy: method or handler is empty.";if(a.aa[d.method])throw"Error in RPC policy: duplicate entry for RPC '"+d.method+"'.";var e=d.method;a.aa[e]={v:d.v,F:d.F,w:d.w,method:e}}if(b.H)for(c=0;c<b.H.length;c++){d=b.H[c];if(!d.type)throw"Error in Event policy: type is empty.";
if(a.$[d.type])throw"Error in Event policy: duplicate entry for type '"+d.type+"'.";e=d.type;a.$[e]={filter:d.filter,type:e}}}},lb=function(a,b,c,d){Q(a,{type:"sessionStateChanged",clientId:b,user:c,sessionState:d})},mb=function(a){var b=new N,c=B.W+B.i;return function(d){if(d.key&&0===d.key.indexOf(c)){var e=b.L(d.key);if(r.B(a.a,e.domain,e.crossSubDomains,e.policy)){var g;if(d.newValue)try{var f=JSON.parse(d.newValue);f&&(g=f.cachedValue)}catch(n){return}Q(a,{type:"sessionSelectorChanged",newValue:g,
crossSubDomains:e.crossSubDomains,domain:e.domain,policy:e.policy,id:e.id})}}}},nb=function(a){var b=new L,c=[B.V,a.a].join(B.i)+B.i;return function(d){if(!d.key&&Aa()){var e=null,g=[];for(d=0;d<window.localStorage.length;d++){var f=window.localStorage.key(d);if(0===f.indexOf(c))if(e)g.push(f);else{var n=window.localStorage.getItem(f);g.push(f);if(n){try{var m=window.JSON.parse(n)}catch(y){continue}m&&m.cachedValue&&(e=b.L(f),e={type:"authResult",clientId:e.clientId,id:e.id,authResult:m.cachedValue})}}}for(d=
0;d<g.length;d++)window.localStorage.removeItem(g[d]);(m=e)&&Q(a,m)}else if(d.key&&0===d.key.indexOf(c)&&d.newValue){try{g=window.JSON.parse(d.newValue)}catch(y){return}g&&g.cachedValue&&(m=b.L(d.key),m={type:"authResult",clientId:m.clientId,id:m.id,authResult:g.cachedValue},Q(a,m))}}},ob=function(a,b){this.a=a;this.m=b;this.Ja=new hb;this.Ta=new N;this.za=new O;this.P=new M},pb=function(a,b,c,d,e){a.Ja.g({origin:a.a,clientId:b},{user:c.G,session:c.G?c.M:void 0},d,e)},qb=function(a,b,c){a.Ja.j({origin:a.a,
clientId:b},E(a.m),c)},rb=function(a,b,c,d,e,g,f){a.za.j({loginHint:b,origin:a.a,clientId:c,responseType:d,scope:e,id:g},E(a.m),f)},sb=function(a,b,c,d,e,g,f){a.za.g({origin:a.a,clientId:c,responseType:d,id:g},e,b,f)},tb=function(a,b,c){var d=a.za;a={origin:a.a,clientId:b};I(d).removeItem(d.f(a),c)},ub=function(a,b,c,d,e,g){if(!a.B(b,c,e))throw"Permission denied for '"+a.a+"' to read session selector for domain '"+b+"'.";a.Ta.j({domain:b,crossSubDomains:c,policy:e,id:d},void 0,function(a){g&&g(a)})},
vb=function(a,b,c,d,e,g,f){if(!a.B(b,c,g))throw"Permission denied for '"+a.a+"' to write session selector for domain '"+b+"'.";a.Ta.g({domain:b,crossSubDomains:c,policy:g,id:e},d,void 0,f)};ob.prototype.B=function(a,b,c){return r.B(this.a,a,b,c)};
var wb=function(a,b,c,d){a.P.j({origin:a.a,clientId:b,scope:c},E(a.m),d)},xb=function(a,b,c,d,e){a.P.g({origin:a.a,clientId:c},d,b,e)},yb=function(a,b,c){this.O=a;this.b=b;this.h=c},zb=function(a,b,c){a.G?c&&void 0!==c[a.G]?(c=c[a.G],Ra(a.M,c)||(a.M=c,pb(a.h,a.O,a,b,function(){lb(a.b,a.O,a.G,a.M)}))):a.M&&(a.M=void 0,pb(a.h,a.O,a,b,function(){lb(a.b,a.O,a.G,void 0)})):b&&lb(a.b,a.O,a.G,void 0)},Bb=function(a,b,c,d){this.m=a;this.b=b;this.c=c;this.h=d;this.Z=void 0;this.A={};this.xa=[];var e=this;
this.m.addListener(function(a){Ab(e,a)})},Cb=function(a){var b=[],c;for(c in a.A){var d=a.A[c].G;d&&b.push(d)}return b},Ab=function(a,b){if(b.newHash)Za(a.c,Cb(a),function(c){for(var d in a.A)zb(a.A[d],b.newHash,c&&c.activeHints)});else for(var c in a.A)zb(a.A[c],b.newHash,void 0)},Db=function(a,b,c,d,e){var g=a.A[b];g||(g=new yb(b,a.b,a.h),a.A[b]=g);a=g;b=c.login_hint;c=c.session_state;a.G!=b?(a.G=b,a.M=b?c:void 0,pb(a.h,a.O,a,d,e)):e&&e()},Eb=function(a,b,c){var d=a.A[b];d?c(!0):qb(a.h,b,function(e){e?
(d=new yb(b,a.b,a.h),a.A[b]=d,d.G=e.user,d.M=e.session,c(!0)):Ya(a.c,b,function(d){d&&d.valid?(d=new yb(b,a.b,a.h),a.A[b]=d,pb(a.h,b,d,E(a.m),function(){c(!0)})):c(!1)})})},Fb=function(a,b){x()||Ba()||Ca()?a.xa.push(b):xa(Aa()?document:window,"storage",b)},R=function(a,b,c){this.a=a;this.b=new ib(a,b);this.m=new Sa(B.ma,B.Xa);this.c=new Wa(a,c);this.h=new ob(a,this.m);this.I=new Bb(this.m,this.b,this.c,this.h)};h=R.prototype;
h.start=function(){var a=this,b=function(){a.b.Jb.apply(a.b,arguments)},c=function(){Q(a.b,{type:"idpReady"});u("Initialize IDP IFrame successfully.")},d=function(c){var d=window;if(d.removeEventListener)d.removeEventListener("message",b,!1);else if(d.detachEvent)d.detachEvent("onmessage",b);else throw"Remove event handler for message failed.";Ta(a.m);Q(a.b,{type:"idpError",error:c.message})};try{kb(this.b,this.na()),xa(window,"message",b),Fb(this.I,mb(this.b)),Fb(this.I,nb(this.b)),Va(this.m),r.Ab(c,
d)}catch(e){d(e)}};h.Fb=function(a){var b=this;Eb(this.I,(a.params||{}).clientId,function(c){P(b.b,a.id,c)})};
h.qb=function(a){var b=a.params||{},c=this,d=function(b){P(c.b,a.id,b)},e=b.clientId,g=b.loginHint,f=b.request,n=b.sessionSelector;f.client_id=e;f.login_hint=g;f.ss_domain=n.domain;var m=E(this.m);if(m){var y=function(a){a&&!a.error&&a.login_hint?(a.first_issued_at=(new Date).getTime(),a.expires_at=a.first_issued_at+1E3*a.expires_in,a.session_state||(a.session_state={}),a.scope||(a.scope=f.scope),b.skipCache?Db(c.I,e,a,m,function(){d(a)}):sb(c.h,m,e,f.response_type,a,b.id,function(){Db(c.I,e,a,m,
function(){d(a)})})):(a=a||{},d(a))};b.forceRefresh?ab(this.c,f,y):rb(this.h,g,e,f.response_type,f.scope,b.id,function(a){a&&18E4<a.expires_at-(new Date).getTime()?Db(c.I,e,a,m,function(){d(a)}):ab(c.c,f,y)})}else P(c.b,a.id,{error:"user_logged_out"})};h.vb=function(a){var b=this,c=function(c){P(b.b,a.id,c)};if(E(this.m)){var d=a.params||{},e=d.request,g=d.sessionSelector;e.client_id=d.clientId;e.login_hint=d.loginHint;e.ss_domain=g.domain;bb(this.c,e,c)}else c({error:"user_logged_out"})};
h.Lb=function(a){var b=a.params||{},c=b.clientId,d=this;db(this.c,b.token,function(b){tb(d.h,c,function(){P(d.b,a.id,b)})})};h.Ub=function(a){if(x()||Ba()||Ca()){var b=a.params||{},c=(new L).f({clientId:b.clientId,id:b.id,origin:b.origin});b=this.I;if(x()||Ba()||Ca()){b.Z&&b.Z.stop();b.Z=new C(c);for(c=0;c<b.xa.length;c++)b.Z.addListener(b.xa[c]);b.Z.start()}}P(this.b,a.id,!0)};h.pb=function(a){var b=this,c=a.params||{};ub(this.h,c.domain,c.crossSubDomains,c.id,c.policy,function(c){P(b.b,a.id,c)})};
h.Sb=function(a){var b=a.params||{},c=b.hint,d=!!b.disabled,e=b.domain,g=b.crossSubDomains,f=b.id,n=b.policy,m=this;if(c||d)var y={hint:c,disabled:d};vb(this.h,e,g,y,f,n,function(){Q(m.b,{type:"sessionSelectorChanged",newValue:y,domain:e,crossSubDomains:g,id:f,policy:n});P(m.b,a.id,!0)})};
h.Cb=function(a){var b=a.params||{},c=this,d=function(b){P(c.b,a.id,b)},e=b.clientId,g=b.request,f=b.sessionSelector;g.client_id=e;g.response_type="id_token";g.ss_domain=f.domain;var n=E(this.m);if(n){var m=function(a){a&&!a.error?(a.first_issued_at=(new Date).getTime(),a.expires_at=a.first_issued_at+1E3*a.expires_in,a.scope=g.scope,xb(c.h,n,e,a,function(){d(a)})):(a=a||{error:"No response returned from Server."},d(a))};b.forceRefresh?cb(this.c,g,m):wb(this.h,e,g.scope,function(a){a?d(a):cb(c.c,g,
m)})}else d({scope:g.scope,sessions:[]})};h.Gb=function(a){a=a&&a.params||{};return a.clientId&&!D(a.clientId)};h.zb=function(a){var b=a&&a.params||{};a=b.loginHint;var c=!D(b.id),d=b.clientId&&!D(b.clientId),e=!!b.request,g=e&&b.request.scope;(b=(e=e&&b.request.response_type)&&0<=b.request.response_type.indexOf("code"))&&u("Bad request: 'code' response_type is not supported.");return a&&c&&d&&g&&e&&!b};
h.wb=function(a){a=a&&a.params||{};var b=!D(a.id),c=a.clientId&&!D(a.clientId),d=!!a.request&&a.request.scope;return a.loginHint&&b&&c&&d};h.xb=function(a){a=a&&a.params||{};var b=a.domain&&!D(a.domain),c=!D(a.policy);return!D(a.id)&&b&&c&&this.h.B(a.domain,!!a.crossSubDomains,a.policy)};h.Tb=function(a){a=a&&a.params||{};var b=a.domain&&!D(a.domain),c=!D(a.policy);return!D(a.id)&&b&&c&&this.h.B(a.domain,!!a.crossSubDomains,a.policy)&&B.fb(a)};
h.Db=function(a){a=a&&a.params||{};var b=a.clientId&&!D(a.clientId),c=!!a.request&&a.request.scope;return!D(a.id)&&b&&c};h.Ob=function(a){a=a&&a.params||{};var b=!!a.token,c=a.clientId&&!D(a.clientId);return!D(a.id)&&b&&c};h.Vb=function(a){a=a&&a.params||{};var b=a.origin&&!D(a.origin),c=a.id&&!D(a.id);return a.clientId&&!D(a.clientId)&&b&&c};h.Qb=function(a){var b;if(b=a.clientId)a=a.clientId,b=!(!a||!this.I.A[a]);return b};
h.gb=function(a){var b;if(b=a.clientId)b=a.clientId,b=!(!b||!this.I.A[b]);return b&&a.id&&a.authResult};h.Pb=function(a){return a.domain&&this.h.B(a.domain,a.crossSubDomains,a.policy)};var S=function(a,b){return function(){return b.apply(a,arguments)}};R.prototype.na=function(){var a={s:[],H:[]};Gb(this,a);return a};
var Gb=function(a,b){b.s.push({method:"monitorClient",v:S(a,a.Fb),F:!1,w:S(a,a.Gb)});b.s.push({method:"getTokenResponse",v:S(a,a.qb),F:!0,w:S(a,a.zb)});b.s.push({method:"getOnlineCode",v:S(a,a.vb),F:!0,w:S(a,a.wb)});b.s.push({method:"getSessionSelector",v:S(a,a.pb),F:!0,w:S(a,a.xb)});b.s.push({method:"setSessionSelector",v:S(a,a.Sb),F:!1,w:S(a,a.Tb)});b.s.push({method:"listIdpSessions",v:S(a,a.Cb),F:!0,w:S(a,a.Db)});b.s.push({method:"revoke",v:S(a,a.Lb),w:S(a,a.Ob)});b.s.push({method:"startPolling",
v:S(a,a.Ub),w:S(a,a.Vb)});b.H.push({type:"idpReady"});b.H.push({type:"idpError"});b.H.push({type:"sessionStateChanged",filter:S(a,a.Qb)});b.H.push({type:"sessionSelectorChanged",filter:S(a,a.Pb)});b.H.push({type:"authResult",filter:S(a,a.gb)})};var Hb="client_id origin ss_domain scope privileged authuser".split(" ");var Jb=function(a,b,c){b.origin=a.a;b.privileged=!0;b=$a(b,Hb);F(B.ca,b,Ib(a.a),function(a){c(a)},!1)};function Ib(a){var b={},c=A.K(B.Oa());if(c){if(!c)throw Error("Session cookie value cannot be empty.");c=new p(new q,na(c));a=pa(ra(c,na(a)));b["X-Csrf-Token"]=a}return b};var T=function(){};w(T,J);T.prototype.f=function(a){a=void 0===a?{}:a;return["gsi_gs",void 0===a.origin?null:a.origin,void 0===a.clientId?null:a.clientId].join(B.i)};T.prototype.j=function(a,b,c){var d=this;c=void 0===c?function(){}:c;J.prototype.j.call(this,a,b,function(b){b?!b.expires_at||b.expires_at<=(new Date).getTime()?I(d).removeItem(d.f(a),function(){return c(null)}):(b.expires_at=void 0,c(b)):c(null)})};
T.prototype.g=function(a,b,c,d){b&&(b.expires_at=(new Date).getTime()+864E5);J.prototype.g.call(this,a,b,c,d)};R.prototype.nb=function(a){var b=this;a=void 0===a?{}:a;var c=a.id,d=void 0===a.params?{}:a.params,e=function(a){a&&a.sessions?(a=Kb(g,a.sessions),P(b.b,c,a)):P(b.b,c,null)},g=d.loginHint;delete d.loginHint;var f=E(this.m);if(f){a=d.clientId;var n=d.request;d=d.sessionSelector;n.client_id=a;n.ss_domain=d.domain;var m=new T,y={clientId:a,origin:this.a};m.j(y,f,function(a){a?e(a):Jb(b.c,n,function(a){!a||a.error?e(null):m.g(y,a,f,function(){e(a)})})})}else e(null)};
function Kb(a,b){if(!b.length)return null;var c=a.toLowerCase();b=ha(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,d.login_hint){if(a===d.obfuscatedGaiaId)return d.login_hint;if(d.emails&&d.emails.length)for(var e=ha(d.emails),g=e.next();!g.done;g=e.next())if(c===g.value.toLowerCase())return d.login_hint}return null};R.prototype.ob=function(a){a=void 0===a?{}:a;a=void 0===a.params?{}:a.params;var b=!!a.clientId&&!D(a.clientId),c=!!a.request,d=!!a.sessionSelector;return!!a.loginHint&&b&&c&&d};var Lb=function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(a[c]&&b[d]&&a[c].toLowerCase()===b[d].toLowerCase())return!0;return!1};var Nb=function(a,b,c){b.origin=a.a;b.privileged=!0;b.redirect_uri=void 0;b.response_type=void 0;F(B.ca,b,Mb(a),c,!1)},Ob=function(a,b,c,d){F((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webauth",{origin:a.a,client_id:b,user_ids:c.join(";")},Mb(a),d,!0)},Pb=function(a,b,c){F("/o/oauth2/auth",{origin:a.a,client_id:b.client_id,login_hint:b.login_hint,response_type:"code",access_type:"offline",scope:"https://www.googleapis.com/auth/googlenow.publish",redirect_uri:"xhr",timestamp:b.timestamp,
signature:b.signature,signed_by:"google_now"},Mb(a),c,!1)},U=function(a,b,c){F((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webAuthApiAnalytics",{origin:a.a,client_id:b,status:c},Mb(a),function(){},!0)},Mb=function(a){var b={},c=A.K(B.Oa());if(c){a=a.a;if(!a||!c)throw Error("RP origin and session cookie value cannot be empty.");c=new p(new q,na(c));c=pa(ra(c,na(a)));b["X-Csrf-Token"]=c}return b};var V=function(){};w(V,K);V.prototype.f=function(a){return["now_as",a.U,a.clientId||"ALL_CLIENTS"].join(B.i)};V.prototype.L=function(a){var b={};if(a){a=a.split(B.i);if("now_as"!==a[0]||3!=a.length)throw Error("Invalid assertion cache key.");b.U=a[1];b.clientId="ALL_CLIENTS"==a[2]?void 0:a[2]}return b};V.prototype.j=function(a,b,c){var d=this;K.prototype.j.call(this,a,b,function(b){b&&b.e?b.e<(new Date).getTime()?I(d).removeItem(d.f(a),c):c&&c(b.o):c&&c(void 0)})};
V.prototype.g=function(a,b,c,d){if(void 0!==b){var e=!!b;if(e&&!a.clientId)throw Error("Cannot cache all clients enabled for a user.");b={};b.o=e;b.e=(new Date).getTime()+864E5}K.prototype.g.call(this,a,b,c,d)};var Qb=function(a,b,c,d){var e={U:b,clientId:c};a.j({U:b},void 0,function(b){!1===b?d(!1):a.j(e,void 0,d)})},Rb=function(a,b,c,d){a.g({U:b},void 0,void 0,function(){a.g({U:b,clientId:c},!0,void 0,d)})},Sb=function(a,b,c,d,e){a.g({U:b,clientId:d?void 0:c},!1,void 0,e)};var W=function(){};w(W,J);W.prototype.f=function(a){return["now_gs",a.origin,a.clientId].join(B.i)};W.prototype.j=function(a,b,c){var d=this;J.prototype.j.call(this,a,b,function(b){if(b&&b.expires_at)if(b.expires_at<=(new Date).getTime())I(d).removeItem(d.f(a),function(){c&&c(e)});else{b.expires_at=void 0;var e=b}c&&c(e)})};W.prototype.g=function(a,b,c,d){b&&(b.expires_at=(new Date).getTime()+864E5);J.prototype.g.call(this,a,b,c,d)};R.prototype.rb=function(a){var b=this;if(!Tb(this,"getCode",a.id)){var c=Ub(this,a);if(3<c.emails.length)X(c,"THROTTLED","At most 3 email addresses can be used."),U(this.c,c.clientId,1);else if(c.da){var d=function(a){a.length?Vb(b,c,a,function(a){Wb(b,c,a.auth_request)}):(X(c,"DISABLED"),U(b.c,c.clientId,4))},e=function(a){"AUTH_EXISTS"==a.message&&(X(c,"AUTHORIZATION_EXISTS","Authorization already granted for the user."),U(b.c,c.clientId,3))};Xb(this,c,!1,function(a){Yb(b,c,a,void 0,d,e)})}else X(c,
"DISABLED"),U(this.c,c.clientId,2)}};R.prototype.Mb=function(a){var b=this;if(!Tb(this,"revokeNow",a.id)){var c=Ub(this,a);3<c.emails.length&&X(c,"THROTTLED","At most 3 email addresses can be used.");if(c.da){var d=function(a){if(a.length)for(var d=a.length,e=0;e<a.length;e++)Zb(b,c.clientId,a[e],function(a){(a=a&&a.access_token)?db(b.c,a,function(){d--;d||c.S({})}):(d--,d||c.S({}))});else c.S({})},e=function(){};Xb(this,c,!0,function(a){Yb(b,c,a,!0,d,e)})}else c.S({})}};
var Tb=function(a,b,c){a.ta=a.ta||{};if(!a.ta[b])return a.ta[b]=!0,!1;P(a.b,c,{error:"THROTTLED",detail:"The "+b+"() method has already been invoked."});return!0},Ub=function(a,b){var c=b.params||{},d={clientId:c.clientId,emails:c.emails,S:function(c){P(a.b,b.id,c)}};d.da=E(a.m);d.Ua={origin:a.a,clientId:c.clientId};return d},Xb=function(a,b,c,d){a.P||(a.P=new W);var e=function(c){c&&c.sessions?a.P.g(b.Ua,c,b.da,function(){d(c)}):X(b,"OTHER","Failed to get Google session information.")},g={client_id:b.clientId,
scope:"https://www.googleapis.com/auth/googlenow.publish"};c?Nb(a.c,g,e):a.P.j(b.Ua,b.da,function(b){b?d(b):Nb(a.c,g,e)})},Yb=function(a,b,c,d,e,g){a.N||(a.N=new V);var f=function(a){e&&e(a)},n=function(){var a=Error("AUTH_EXISTS");g&&g(a)};if(c.sessions&&c.sessions.length){var m=function(c,e){if(0==c.length)f(e);else{var g=c.shift();g.emails&&Lb(b.emails,g.emails)?d&&g.login_hint?(e.push(g.login_hint),m(c,e)):d?m(c,e):g.login_hint?n():g.obfuscatedGaiaId?Qb(a.N,g.obfuscatedGaiaId,b.clientId,function(a){a?
n():(void 0===a&&e.push(g.obfuscatedGaiaId),m(c,e))}):m(c,e):m(c,e)}};m(c.sessions.slice(0),[])}else f([])},Vb=function(a,b,c,d){a.N||(a.N=new V);Ob(a.c,b.clientId,c,function(e){if(e&&"DISABLED"!=e.status)"THROTTLED"==e.status?(X(b,"THROTTLED","Throttled by Google Now server."),U(a.c,b.clientId,7)):"OK"==e.status&&$b(a,b,e,c)?Rb(a.N,e.auth_request.login_hint,b.clientId,function(){d(e)}):(X(b,"OTHER","Unexpected response from Google Now server."),U(a.c,b.clientId,8));else{var g=!1,f=!1;if(e.users&&
e.users.length){var n=function(c,d){if(0==c.length)d();else{var e=c.shift();e.user_id?Sb(a.N,e.user_id,b.clientId,e.disabled_for_all_clients,function(){e.disabled_for_all_clients?f=!0:g=!0;n(c,d)}):n(c,d)}};n(e.users.slice(0),function(){X(b,"DISABLED");U(a.c,b.clientId,f&&!g?5:6)})}else X(b,"DISABLED"),U(a.c,b.clientId,f&&!g?5:6)}})},$b=function(a,b,c,d){c=c.auth_request;return!!c&&c.origin==a.a&&c.client_id==b.clientId&&0<c.timestamp&&!!c.signature&&"google_now"==c.signed_by&&0<=v(d,c.login_hint)},
Wb=function(a,b,c){Pb(a.c,c,function(c){c&&c.code?(b.S({code:c.code}),U(a.c,b.clientId,9)):c&&"immediate_failed"==c.error&&"policy_enforced"==c.error_subtype?(X(b,"AUTHORIZATION_EXISTS","Failed to issue code due to existing authorization."),U(a.c,b.clientId,10)):(X(b,"OTHER",c.error||"Failed to get code."),U(a.c,b.clientId,11))})},Zb=function(a,b,c,d){ab(a.c,{client_id:b,login_hint:c,response_type:"token",scope:"https://www.googleapis.com/auth/googlenow.publish"},d)},X=function(a,b,c){a.S({error:b,
detail:c})};R.prototype.sb=function(a){a=a&&a.params||{};var b=a.emails;b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!D(a.clientId)&&b};R.prototype.Nb=function(a){a=a&&a.params||{};var b=a.emails;b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!D(a.clientId)&&b};R.prototype.na=function(){var a={s:[],H:[]};ac(this,a);return a};
var ac=function(a,b){b.s.push({method:"now:getCode",v:S(a,a.rb),F:!0,w:S(a,a.sb)});b.s.push({method:"now:revoke",v:S(a,a.Mb),F:!0,w:S(a,a.Nb)})};R.prototype.na=function(){var a={s:[],H:[]};Gb(this,a);ac(this,a);a.s.push({method:"gsi:fetchLoginHint",v:S(this,this.nb),F:!0,w:S(this,this.ob)});return a};B.ma="APISID";B.Ga="SAPISID";B.Ia="/o/oauth2/iframerpc?action=sessionState";B.Ba="/o/oauth2/iframerpc?action=checkOrigin";B.Fa="/o/oauth2/iframerpc?action=issueToken";B.Ea="/o/oauth2/iframerpc?action=issueOnlineCode";B.ca="/o/oauth2/iframerpc?action=listSessions";
var bc=function(){var a=wa("origin");if(!a)throw"Failed to get parent origin from URL hash!";var b=wa("rpcToken");if(!b)throw"Failed to get rpcToken from URL hash!";var c=wa("debug");ta="0"!=c&&!!c;(new R(a,b)).start()},cc=["lso","startIdpIFrame"],Y=this;cc[0]in Y||!Y.execScript||Y.execScript("var "+cc[0]);for(var Z;cc.length&&(Z=cc.shift());)cc.length||void 0===bc?Y=Y[Z]&&Y[Z]!==Object.prototype[Z]?Y[Z]:Y[Z]={}:Y[Z]=bc;
